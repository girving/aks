/-
  # Base Expander for the Zig-Zag Construction

  The iterated zig-zag construction (`zigzagFamily` in `ZigZag.lean`) requires
  a concrete "seed" expander: a D-regular graph on D‚Å¥ vertices with spectral
  gap bounded by some constant Œ≤ < 1.

  The specific graph defined below was chosen by fair dice roll.
  It is guaranteed to be random.

  More precisely: a random D-regular graph on D‚Å¥ vertices was generated
  via the configuration model (`scripts/random-graph`), its spectral gap
  was verified numerically, and it was exported as an explicit rotation map.
  The spectral gap bound is currently axiomatized (see ¬ß Certificate below
  for why verified certificates are impractical for random graphs).

  ## Certificate for Spectral Gap Verification

  We want to certify: `spectralGap G ‚â§ Œ≤`, i.e., all non-trivial eigenvalues
  Œª·µ¢ of A satisfy |Œª·µ¢| ‚â§ Œ≤D. This is equivalent to `C|_{1‚ä•} ‚âΩ 0` where
  `C = (Œ≤D)¬≤¬∑I - A¬≤` (integer matrix when `Œ≤D ‚àà ‚Ñ§`; e.g., Œ≤ = 7/12, Œ≤D = 7).

  ### Certificate approaches considered

  **Dense certificates (O(n¬≤) data, impractical for n = D‚Å¥):**
  - LDL^T / sparse Cholesky of `C|_{1‚ä•}`: Random expanders have high treewidth
    (~O(n)), so Cholesky fill-in is O(n¬≤) regardless of elimination ordering.
  - Eigenvector certificate: n rational eigenvectors √ó n entries each = O(n¬≤).
  - Gram matrix: G^T G = C requires O(n¬≤) entries in G.

  **Scaled diagonal dominance (SDD):** Find D such that DMD is diagonally
  dominant, proving M = Œ±I - A ‚âΩ 0. Fails because the diagonal dominance
  constraint sums to Œ± ‚â• D over all vertices (double-counting in D-regular
  graphs), but we need Œ± = 7 < D = 12.

  **Edge-decomposable PSD:** Write M = Œ£ (2√ó2 PSD blocks on edges) + diag(u).
  Fails because AM-GM gives each edge cost ‚â• 2 (from a_{ij}¬∑a_{ji} ‚â• 1),
  total ‚â• 2|E| = nD, but the budget from the diagonal is only nŒ± < nD.

  **Trace method (O(1) data, but infeasible verification):**
  - Certificate: `tr(A^{2k})` for k ‚âà 91 (to get (n-1)^{1/(2k)} ¬∑ max|Œª| ‚â§ Œ≤D).
  - Verification requires computing tr(A^{2k}), which is O(n¬≤ ¬∑ k) ‚Äî infeasible in
    the Lean kernel for n = 20736, k = 91.
  - For small k (e.g., k = 2, walks of length 4), verification is ~n¬∑D‚Å¥ ‚âà 4¬∑10‚Å∏
    comparisons (borderline feasible), but the bound is far too loose
    (gives max|Œª| ‚â§ 40 instead of the needed ‚â§ 7).

  **Krylov / Lanczos (O(n) data, but exact arithmetic infeasible):**
  Full Lanczos (k = n-1 steps) from a starting vector produces a tridiagonal
  matrix T whose eigenvalues equal those of A|_{1‚ä•}. Certificate would be
  q‚ÇÅ + tridiagonal T + LDL^T of Œ≤D¬∑I ¬± T. Size O(n), no fill-in.
  Problem: exact integer Lanczos has exponential coefficient growth (~D^k bits
  at step k). Experimentally on n=24: integers reach 1.4M bits by step 12,
  with each step ~3.7√ó larger. Extrapolating to n=20736: infeasible.
  (See `scripts/krylov-cert` for experiments.)

  **Current approach: axioms.**
  Standard in formalization projects. The axioms are justified by numerical
  computation in Python (`scripts/random-graph`). The spectral gap can be
  verified to arbitrary precision using interval arithmetic (mpmath).

  ### Open question: algebraic base expanders
  Cayley graphs of explicit groups (e.g., SL‚ÇÇ(ùîΩ_p) with generators) have
  spectral gaps provable from representation theory rather than numerical
  computation. This would replace the axioms with a purely algebraic proof,
  but requires substantial formalization of representation theory.
-/

import AKS.RegularGraph


/-! **Base Expander Axioms** -/

/-- A concrete base expander. Currently axiomatized.

    Generated by `scripts/random-graph`; will be replaced with a concrete
    rotation map and spectral gap certificate. -/
axiom baseExpander : RegularGraph 4096 8

/-- The spectral gap of the base expander is at most 1/5.

    Will be replaced with a verified proof from the LDL^T certificate. -/
axiom baseExpander_gap : spectralGap baseExpander ‚â§ 1/5
